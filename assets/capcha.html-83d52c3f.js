import{_ as n}from"./plugin-vue_export-helper-c27b6911.js";import{o as s,c as a,d as t}from"./app-531015dd.js";const e={},c=t(`<h2 id="基本介绍" tabindex="-1"><a class="header-anchor" href="#基本介绍" aria-hidden="true">#</a> 基本介绍</h2><p>主要用于防止恶意访问接口行为，后端需要在接口中验证验证码是否正确。</p><h2 id="使用示例" tabindex="-1"><a class="header-anchor" href="#使用示例" aria-hidden="true">#</a> 使用示例</h2><h3 id="请求参数" tabindex="-1"><a class="header-anchor" href="#请求参数" aria-hidden="true">#</a> 请求参数</h3><p>请求接口中需要传入验证码 id 和用户填写的验证码，后端验证验证码是否正确。</p><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token comment">// AccountLoginInp 账号登录</span>
<span class="token keyword">type</span> AccountLoginInp <span class="token keyword">struct</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...其他参数</span>
	CaptchaCode <span class="token builtin">string</span> <span class="token string">\`dc:&quot;验证码&quot; v:&quot;required#验证码不能为空&quot;\`</span>
	CaptchaId   <span class="token builtin">string</span> <span class="token string">\`dc:&quot;验证码id&quot; v:&quot;required#验证码id不能为空&quot;\`</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>CaptchaCode <ul><li>用户填写的验证码</li></ul></li><li>CaptchaId <ul><li>验证码 id，前端可以从验证码接口获取</li></ul></li></ul><h3 id="验证" tabindex="-1"><a class="header-anchor" href="#验证" aria-hidden="true">#</a> 验证</h3><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;ddtd/internal/library/captcha&quot;</span>
<span class="token punctuation">)</span>

<span class="token comment">// AccountLogin 账号登录</span>
<span class="token keyword">func</span> <span class="token punctuation">(</span>c <span class="token operator">*</span>cSite<span class="token punctuation">)</span> <span class="token function">AccountLogin</span><span class="token punctuation">(</span>ctx context<span class="token punctuation">.</span>Context<span class="token punctuation">,</span> req <span class="token operator">*</span>common<span class="token punctuation">.</span>AccountLoginReq<span class="token punctuation">)</span> <span class="token punctuation">(</span>res <span class="token operator">*</span>common<span class="token punctuation">.</span>AccountLoginRes<span class="token punctuation">,</span> err <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  <span class="token keyword">if</span> <span class="token operator">!</span>captcha<span class="token punctuation">.</span><span class="token function">Instance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Verify</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>CaptchaId<span class="token punctuation">,</span> req<span class="token punctuation">.</span>CaptchaCode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    err <span class="token operator">=</span> gerror<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token string">&quot;验证码输入错误&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span>
  <span class="token punctuation">}</span>
	<span class="token comment">// ...</span>
	<span class="token keyword">return</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,9),o=[c];function p(i,l){return s(),a("div",null,o)}const d=n(e,[["render",p],["__file","capcha.html.vue"]]);export{d as default};
